module trans/semantics/sl

imports
  trans/semantics/functions
  trans/semantics/statements
  trans/semantics/expressions
  trans/semantics/objects

signature
  arrows
    Program -init-> U
    FunDefSeq -load-> U
    FunDef -load-> U

rules // loading and init

  p@Program(_) -init-> U()
  where
    p -desugartop-> ProgramDesug(fdefseq, stmt);
    fdefseq :: E {} -load-> _ :: E;
    C C(E) |- stmt :: E --> _ :: E _.

  FunDefSeq(fdef, fdefseq) -load-> U()
  where
    fdef -load-> _;
    fdefseq -load-> _.
    
  NoFunDefSeq() -load-> U().

  FunDefDesug(name, params, body) :: E -load-> U() :: E {name |--> FunV(params, body), E}.


